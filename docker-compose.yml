services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: project-study-react-native
    ports:
      - "0.0.0.0:8081:8081"   # Metro (0.0.0.0 = aceitar conexões do celular na rede)
      - "0.0.0.0:19000:19000" # Expo dev tools
      - "19001:19001"
      - "19002:19002"
    volumes:
      # Código fonte no host = live reload
      - .:/app
      # Manter node_modules do container (evita sobrescrever com o do host)
      - /app/node_modules
    environment:
      - EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0
      # IP do seu PC na rede (use .env com HOST_IP=192.168.x.x) para o QR code funcionar no celular
      - REACT_NATIVE_PACKAGER_HOSTNAME=${HOST_IP:-0.0.0.0}
    stdin_open: true
    tty: true
